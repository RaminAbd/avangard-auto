<div class="products-wrapper">
  <div class="page-name">
    <h3>{{ "Products" | translate }} ( {{ Products.length }} )</h3>
  </div>
  <div class="create-and-filter">
    <button class="create" (click)="Create()">
      {{ "CreateProduct" | translate }}
    </button>

    <div class="filter">
      <div class="correlation-back" *ngIf="showCorrelation">
        <div class="correlate">
          <div class="header">
            <i class="pi pi-times-circle" (click)="showCorrelation = false"></i>
          </div>
          <div class="body">
            <p-dropdown
              *ngIf="translate.currentLang === 'ka-Geo'"
              [options]="correlationTypes"
              [(ngModel)]="selectedCorrelationType"
              placeholder="{{ 'Type' | translate }}"
              optionLabel="nameKa"
            >
            </p-dropdown>
            <p-dropdown
              *ngIf="translate.currentLang === 'ru-Ru'"
              [options]="correlationTypes"
              [(ngModel)]="selectedCorrelationType"
              placeholder="{{ 'Type' | translate }}"
              optionLabel="nameRu"
            >
            </p-dropdown>
            <p-dropdown
              *ngIf="translate.currentLang === 'en-Us'"
              [options]="correlationTypes"
              [(ngModel)]="selectedCorrelationType"
              placeholder="{{ 'Type' | translate }}"
              optionLabel="name"
            >
            </p-dropdown>
            <input type="number" [(ngModel)]="correlationPercentage" />
            <button
              class="filter-btn"
              (click)="Calculate()"
              [disabled]="correlationPercentage === 0"
            >
              <i class="pi pi-percentage"></i>
            </button>
          </div>
        </div>
      </div>

      <button class="filter-btn" (click)="exportProductsExcel()">
        <i class="pi pi-file-excel"></i>
      </button>
      <button class="filter-btn" (click)="showCorrelateinputs()">
        <i class="pi pi-percentage"></i>
      </button>
      <input type="text" [(ngModel)]="SearchText" />
      <button class="filter-btn" (click)="Search()">
        <i class="pi pi-search"></i>
      </button>
    </div>
  </div>
  <div class="uploads">
    <div class="input-block image" style="margin-bottom: 0">
      <div class="image-input">
        <label for="file"
          >{{ "Import incoming" | translate }}
          <i
            class="pi pi-upload"
            *ngIf="!incomingsLoading && !IncomingsUploadSuccess"
          ></i>
          <i
            class="pi pi-spin pi-spinner"
            *ngIf="incomingsLoading && !IncomingsUploadSuccess"
          ></i>
          <i
            class="pi pi-check"
            *ngIf="!incomingsLoading && IncomingsUploadSuccess"
          ></i>
        </label>
      </div>
      <input
        type="file"
        name="file"
        id="file"
        accept=".xls, .xlsx"
        (change)="chooseFile($event)"
      />
    </div>
    <div class="input-block image" style="margin-bottom: 0">
      <div class="image-input">
        <label for="file1"
        >{{ "Import outgoing" | translate }}
          <i
            class="pi pi-upload"
            *ngIf="!outgoingsLoading && !OutgoingsUploadSuccess"
          ></i>
          <i
            class="pi pi-spin pi-spinner"
            *ngIf="outgoingsLoading && !OutgoingsUploadSuccess"
          ></i>
          <i
            class="pi pi-check"
            *ngIf="!outgoingsLoading && OutgoingsUploadSuccess"
          ></i>
        </label>
      </div>
      <input
        type="file"
        name="file"
        id="file1"
        accept=".xls, .xlsx"
        (change)="chooseOutgoingFile($event)"
      />
    </div>
    <div class="input-block image" style="margin-bottom: 0">
      <div class="image-input">
        <label for="file2"
        >{{ "Import new products" | translate }}
          <i
            class="pi pi-upload"
            *ngIf="!newProductsLoading && !newProductsUploadSuccess"
          ></i>
          <i
            class="pi pi-spin pi-spinner"
            *ngIf="newProductsLoading && !newProductsUploadSuccess"
          ></i>
          <i
            class="pi pi-check"
            *ngIf="!newProductsLoading && newProductsUploadSuccess"
          ></i>
        </label>
      </div>
      <input
        type="file"
        name="file"
        id="file2"
        accept=".xls, .xlsx"
        (change)="chooseNewProductsFile($event)"
      />
    </div>
  </div>
  <div class="table-block">
    <app-products-table
      [ArrModel]="Products"
      [loading]="loading"
      [cols]="cols"
      (Action)="Action($event)"
      [Search]="SearchTextForTable"
      (RowQtyUpdated)="RowQtyUpdated($event)"
      (RowPriceUpdated)="RowPriceUpdated($event)"
      (RowCodeUpdated)="RowCodeUpdated($event)"
      (RowInnerCodeUpdated)="RowInnerCodeUpdated($event)"
      (RowNameUpdated)="getProductDetails($event)"
    >
    </app-products-table>
  </div>
</div>
<p-toast></p-toast>
